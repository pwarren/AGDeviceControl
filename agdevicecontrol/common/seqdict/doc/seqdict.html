<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.5 [de]C-CCK-MCD QXW0320g  (Win95; I) [Netscape]">
   <title>Sequential Dictionary</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000FF">

<center>
<h2>
Sequential Dictionary</h2></center>

<h2>
Description:</h2>
The Python dictionary accesses its keys by hash values for performance
reasons. As a result there is no specified order of its elements. Consequently
there are no sort or slicing methods on ordinary dictionaries.
<p>A little German-English dictionary:
<br><tt>dict={"Abend" : "evening",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "aber" : "but",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Bild" : "picture",</tt>
<br><tt>&nbsp;&nbsp;&nbsp; "deshalb" : "therefore",</tt>
<br><tt>&nbsp; "Erkennung" : "recognition",</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "Fl&ouml;te" : "flute",</tt>
<br><tt>&nbsp;&nbsp; "gewinnen" : "gain" }</tt>
<p><tt>>>> dict</tt>
<br><tt>{'gewinnen': 'gain', 'deshalb': 'therefore', 'Abend': 'evening',
'aber': 'but', 'Bild': 'picture', 'Erkennung': 'recognition', 'Fl\366te':
'flute' }</tt>
<p>Although the dictionary was created with items in order there is no
order and no reliable sequence in the dictionary's representation.
<br>The sequential dictionary incorporates a list holding the dictionary's
keys and the dictionary.
<p>An empty sequential dictionary:
<br><tt>>>> seqdict.seqdict()</tt>
<br><tt>seqdict(</tt>
<br><tt>[], # list holds the keys in sequence</tt>
<br><tt>{}) # dictionary holds the keys and values</tt>
<p>A sequential dictionary of dict is created:
<br><tt>>>> s = seqdict.seqdict(dict)</tt>
<br><tt>>>> s</tt>
<br><tt>seqdict(</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te'],</tt>
<br><tt>{'gewinnen': 'gain', 'deshalb': 'therefore', 'Abend': 'evening',
'aber': 'but', 'Bild': 'picture', 'Erkennung': 'recognition', 'Fl\366te':
'flute'})</tt>
<p>After sorting:
<br><tt>>>> s.sort(lambda x,y:cmp(string.lower(x),string.lower(y)))</tt>
<br><tt>>>> s</tt>
<br><tt>seqdict(</tt>
<br><tt>['Abend', 'aber', 'Bild', 'deshalb', 'Erkennung', 'Fl\366te', 'gewinnen'],</tt>
<br><tt>{'gewinnen': 'gain', 'deshalb': 'therefore', 'Abend': 'evening',
'aber': 'but', 'Bild': 'picture', 'Erkennung': 'recognition', 'Fl\366te':
'flute'})</tt>
<p>Voila, here it is sorted again!
<p><tt>>>> for key,value in s.items():</tt>
<br><tt>... print '%11s : %s'%(key,value)</tt>
<br><tt>...</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Abend : evening</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aber : but</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Bild : picture</tt>
<br><tt>&nbsp;&nbsp;&nbsp; deshalb : therefore</tt>
<br><tt>&nbsp; Erkennung : recognition</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Fl&ouml;te : flute</tt>
<br><tt>&nbsp;&nbsp; gewinnen : gain</tt><tt></tt>
<p>Of course, keys and items also appear in sorted sequence:
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'aber', 'Bild', 'deshalb', 'Erkennung', 'Fl\366te', 'gewinnen']</tt>
<br><tt>>>> s.values()</tt>
<br><tt>['evening', 'but', 'picture', 'therefore', 'recognition', 'flute',
'gain']</tt>
<p><tt>>>> s.items()</tt>
<br><tt>[('Abend', 'evening'), ('aber', 'but'), ('Bild', 'picture'), ('deshalb',
'therefore'), ('Erkennung', 'recognition'), ('Fl\366te', 'flute'), ('gewinnen',
'gain')]</tt>
<h2>
<font size=+1>A short Tutorial:</font></h2>
<b>slicing by index:</b>
<br><tt>>>> s[2:5]</tt>
<br><tt>seqdict(</tt>
<br><tt>['Bild', 'deshalb', 'Erkennung'],</tt>
<br><tt>{'Bild': 'picture', 'Erkennung': 'recognition', 'deshalb': 'therefore'})</tt>
<p><b>insert:</b>
<br><tt><font size=+1>>>> d=seqdict.seqdict({"Fliege":"fly","Hand":"hand"})</font></tt>
<br><tt>>>> s.insert(3,d)</tt>
<br><tt>>>> s</tt>
<br><tt>seqdict(</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Hand', 'Fliege', 'Fl\366te', 'aber',
'deshalb', 'gewinnen'],</tt>
<br><tt>{'Hand': 'hand', 'Fliege': 'fly', 'gewinnen': 'gain', 'deshalb':
'therefore', 'Abend': 'evening', 'aber': 'but', 'Bild': 'picture', 'Erkennung':
'recognition', 'Fl\366te': 'flute'})</tt>
<p><b>append:</b>
<br><tt>>>> x=seqdict.seqdict(dict)</tt>
<br><tt>>>> x.keys()</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te']</tt><tt></tt>
<p><tt>>>> x.append('Zug','train')</tt>
<br><tt>>>> x.keys()</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te',
'Zug']</tt>
<p><b>check:</b>
<br>Checks the integrity of the dictionary. This method is suitable for
debugging reasons.
<br><tt>>>> x.check()</tt>
<br><tt>1 # ok</tt><tt></tt>
<p><tt>>>> x.list[0]='spam' # don't even think to modify internals!</tt>
<br><tt>>>> x.check()</tt>
<br><tt>0 # list and dict are of same length, but keys don't match</tt><tt></tt>
<p><tt>>>> del x.list[1] # don't even think to modify internals!</tt>
<br><tt>>>> x.check()</tt>
<br><tt>-1 # list and dict are not of same length</tt>
<p><b>clear:</b>
<br><tt>>>> x.clear()</tt>
<br><tt>>>> x</tt>
<br><tt>seqdict(</tt>
<br><tt>[],</tt>
<br><tt>{})</tt>
<p><b>copy:</b>
<br><tt>>>> s1=s.copy() # copy of the dictionary</tt>
<br><tt>>>> s2=s[:] # same as s.copy</tt>
<br><tt>>>> s3=s # copies the reference</tt>
<p><tt>>>> s==s1==s2==s3</tt>
<br><tt>1</tt>
<p><tt>>>> s is s1 or s is s2 or s1 is s2</tt>
<br><tt>0</tt>
<p><tt>>>> s is s3</tt>
<br><tt>1</tt>
<p><b>count:</b>
<br>Counts the number of appearance of the value within the dictionary's
values
<br><tt>>>> u=seqdict.seqdict({1:2, 2:3, 3:4, 4:5, 5:3})</tt>
<br><tt>>>> u.count(2)</tt>
<br><tt>1</tt>
<p><tt>>>> u.count(3)</tt>
<br><tt>2</tt>
<p><b>del:</b>
<br><tt>>>> x=seqdict.seqdict(dict)</tt>
<br><tt>>>> x.keys()</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te']</tt><tt></tt>
<p><tt>>>> del x[1:3]</tt>
<br><tt>>>> x.keys()</tt>
<br><tt>['gewinnen', 'aber', 'Bild', 'Erkennung', 'Fl\366te']</tt><tt></tt>
<p><tt>>>> del x['Erkennung']</tt>
<br><tt>>>> x.keys()</tt>
<br><tt>['gewinnen', 'aber', 'Bild', 'Fl\366te']</tt><tt></tt>
<p><tt>>>> del x</tt>
<br><tt>>>> x</tt>
<br><tt>Traceback (innermost last):</tt>
<br><tt>File "&lt;stdin>", line 1, in ?</tt>
<br><tt>NameError: x</tt>
<p><b>extend:</b>
<br><b>update:</b>
<br>Unless the keys are member of s they will be appended, otherwise updated.
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Hand', 'Fliege', 'Fl\366te', 'aber',
'deshalb', 'gewinnen']</tt>
<p><tt>>>> d["Melone"]="melon"</tt>
<br><tt>>>> d.keys()</tt>
<br><tt>['Hand','Fliege','Melone']</tt>
<p><tt>>>> s.extend(d) # same as s.update(d)</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Hand', 'Fliege', 'Fl\366te', 'aber',
'deshalb', 'gewinnen','Melone']</tt>
<p><b>filter:</b>
<br><tt>>>> x=seqdict.seqdict(dict)</tt>
<br><tt>>>> x.keys()</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te']</tt>
<p><tt>>>> import re</tt>
<br><tt>>>> x.filter(re.compile('a',re.I).match) # all keys beginning with
a or A</tt>
<br><tt>seqdict(</tt>
<br><tt>['Abend', 'aber'],</tt>
<br><tt>{'Abend': 'evening', 'aber': 'but'})</tt>
<p><b>get:</b>
<br><tt>>>> s.get('car') # No return value, as 'car' is not a key of s</tt>
<br><tt>>>> s.get('car','key not available')</tt>
<br><tt>'key not available'</tt>
<p><b>index:</b>
<br><tt>>>> s.index("Erkennung")</tt>
<br><tt>2</tt>
<p><b>items:</b>
<br><tt>>>> s.items()</tt>
<br><tt>[('Abend', 'evening'), ('Bild', 'picture'), ('Erkennung', 'recognition'),
('Hand', 'hand'), ('Fliege', 'fly'), ('Fl\366te', 'flute'), ('aber', 'but'),
('deshalb', 'therefore'), ('gewinnen', 'gain')]</tt>
<p><b>has_key:</b>
<br><tt>>>> s.has_key('car')</tt>
<br><tt>0</tt>
<p><b>keys:</b>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Hand', 'Fliege', 'Fl\366te', 'aber',
'deshalb', 'gewinnen']</tt>
<p><b>len:</b>
<br><tt>>>> len(s)</tt>
<br><tt>9</tt>
<p><b>map:</b>
<br><tt>>>> swap = lambda (key,value):(value,key)</tt>
<br><tt>>>> x=seqdict.seqdict(dict)</tt>
<br><tt>>>> x.map(swap) # There is also a swap-method for seqdict</tt>
<br><tt>seqdict(</tt>
<br><tt>['gain', 'therefore', 'evening', 'but', 'picture', 'recognition',
'flute'],</tt>
<br><tt>{'but': 'aber', 'flute': 'Fl\366te', 'picture': 'Bild', 'gain':
'gewinnen', 'evening': 'Abend', 'therefore': 'deshalb', 'recognition':
'Erkennung'})</tt>
<p><b>pop:</b>
<br><b>push:</b>
<br>You can use the dictionary like a stack
<br><tt>>>> s.pop()</tt>
<br><tt>{'gewinnen': 'gain'}</tt>
<p><tt>>>> s.push('Auto','car')</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Hand', 'Fliege', 'Fl\366te', 'aber',
'deshalb', 'Auto']</tt><tt></tt>
<p><tt>>>> s.pop('Hand')</tt>
<br><tt>{'Hand': 'hand'}</tt>
<p><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Fliege', 'Fl\366te', 'aber', 'deshalb',
'Auto']</tt>
<p><b>reduce:</b>
<br><tt>>>> g=lambda x,(u,v):('%s%10s : %s\n'%(x,u,v))</tt>
<br><tt>>>> x=seqdict.seqdict(dict)</tt>
<br><tt>>>> x.reduce(g,'')</tt>
<br><tt>' gewinnen : gain\012 deshalb : therefore\012 Abend : evening\012
aber : but\012 Bild : picture\012 Erkennung : recognition\012 Fl\366te
: flute\012'</tt>
<p><tt>>>> print x.reduce(g,'')[:-1]</tt>
<br><tt>&nbsp; gewinnen : gain</tt>
<br><tt>&nbsp;&nbsp; deshalb : therefore</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; Abend : evening</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aber : but</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Bild : picture</tt>
<br><tt>&nbsp;Erkennung : recognition</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp; Fl&ouml;te : flute</tt>
<p><b>remove:</b>
<br><b>del:</b>
<br><tt>>>> s.remove('Fliege')</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Bild', 'Erkennung', 'Fl\366te', 'aber', 'deshalb', 'Auto']</tt>
<p><tt>>>> del s['Bild']</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Erkennung', 'Fl\366te', 'aber', 'deshalb', 'Auto']</tt>
<p><tt>>>> del s[1:3]</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'aber', 'deshalb', 'Auto']</tt>
<p><b>reverse:</b>
<br><tt>>>> s.reverse()</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Auto', 'deshalb', 'aber', 'Abend']</tt>
<p><b>slice: # slicing by key</b>
<br>Slicing with the "['key1':'key2'] is not possible as python accept
integer indexes only within this construct. Thus the slice method implements
this as an ordinary function call. An extension is slicing by step.
<p><tt>>>> t=seqdict.seqdict(dict)</tt>
<br><tt>>>> t.keys()</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te']</tt>
<p><tt>>>> t.slice('Bild')</tt>
<br><tt>seqdict(</tt>
<br><tt>['Bild'],</tt>
<br><tt>{'Bild': 'picture'})</tt>
<p><tt>>>> t.slice('deshalb','Erkennung')</tt>
<br><tt>seqdict(</tt>
<br><tt>['deshalb', 'Abend', 'aber', 'Bild'],</tt>
<br><tt>{'Abend': 'evening', 'aber': 'but', 'Bild': 'picture', 'deshalb':
'therefore'})</tt>
<p><tt>>>> t.slice('deshalb','Erkennung',2)</tt>
<br><tt>seqdict(</tt>
<br><tt>['deshalb', 'aber'],</tt>
<br><tt>{'deshalb': 'therefore', 'aber': 'but'})</tt>
<p><b>sort:</b>
<br><tt>>>> s.sort()</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'Auto', 'aber', 'deshalb']</tt><tt></tt>
<p><tt>>>> s.sort(lambda x,y:cmp(string.lower(x),string.lower(y)))</tt>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'aber', 'Auto', 'deshalb']</tt>
<p><b>split:</b>
<br>The split-method returns a new sequential dictionary (seqdict). It
expects a function which accepts a key and a value of the dictionary. If
the function returns a key 'tkey' the dictionary-item is copied into the
new seqdict (t) as t[tkey][key]=value. For every tkey a seqdict is hold
as value.
<br>Following example splits the seqdict u into one seqdict for every lowercase
beginning letter. The lowercase beginning letter is the key and the splitted
seqdict is the value for the new seqdict su.
<br><tt>>>> u=seqdict.seqdict(dict)</tt>
<br><tt>>>> u.sort(lambda x,y:cmp(string.lower(x),string.lower(y)))</tt>
<br><tt>>>> u.keys()</tt>
<br><tt>['Abend', 'aber', 'Bild', 'deshalb', 'Erkennung', 'Fl\366te', 'gewinnen']</tt>
<p><tt>>>> su = u.split(lambda x:string.lower(x)[0])</tt>
<br><tt>>>> su</tt>
<br><tt>seqdict(</tt>
<br><tt>['a', 'b', 'd', 'e', 'f', 'g'],</tt>
<br><tt>{'f': seqdict(</tt>
<br><tt>['Fl\366te'],</tt>
<br><tt>{'Fl\366te': 'flute'}), 'g': seqdict(</tt>
<br><tt>['gewinnen'],</tt>
<br><tt>{'gewinnen': 'gain'}), 'd': seqdict(</tt>
<br><tt>['deshalb'],</tt>
<br><tt>{'deshalb': 'therefore'}), 'e': seqdict(</tt>
<br><tt>['Erkennung'],</tt>
<br><tt>{'Erkennung': 'recognition'}), 'b': seqdict(</tt>
<br><tt>['Bild'],</tt>
<br><tt>{'Bild': 'picture'}), 'a': seqdict(</tt>
<br><tt>['Abend', 'aber'],</tt>
<br><tt>{'Abend': 'evening', 'aber': 'but'})})</tt>
<p><tt>>>> for tkey in su.keys():</tt>
<br><tt>...&nbsp;&nbsp; print tkey , su[tkey].keys()</tt>
<br><tt>...</tt>
<br><tt>a ['Abend', 'aber']</tt>
<br><tt>b ['Bild']</tt>
<br><tt>d ['deshalb']</tt>
<br><tt>e ['Erkennung']</tt>
<br><tt>f ['Fl\366te']</tt>
<br><tt>g ['gewinnen']</tt>
<p><b>swap:</b>
<br>This method can only be applied when all values of the dictionary are
immutable. The Python dictionary cannot hold mutable keys! So swap doesn't
work if only one of the values has the type list or dictionary. Tuples
and instances of classes are save as long as they don't emulate lists or
dictionaries.
<br><tt>>>> x=seqdict.seqdict(dict)</tt>
<br><tt>>>> x # A small German - English dictionary</tt>
<br><tt>seqdict(</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te'],</tt>
<br><tt>{'gewinnen': 'gain', 'deshalb': 'therefore', 'Abend': 'evening',
'aber': 'but', 'Bild': 'picture', 'Erkennung': 'recognition', 'Fl\366te':
'flute'})</tt>
<p><tt>>>> x.swap() # swaps keys and items of x</tt>
<br><tt>>>> x # A small English - German dictionary</tt>
<br><tt>seqdict(</tt>
<br><tt>['gain', 'therefore', 'evening', 'but', 'picture', 'recognition',
'flute'],</tt>
<br><tt>{'but': 'aber', 'flute': 'Fl\366te', 'picture': 'Bild', 'gain':
'gewinnen', 'evening': 'Abend', 'therefore': 'deshalb', 'recognition':
'Erkennung'})</tt>
<p><tt>>>> f=seqdict.seqdict({1:[1,2,3]}) # value is mutable list!</tt>
<br><tt>>>> f</tt>
<br><tt>seqdict(</tt>
<br><tt>[1],</tt>
<br><tt>{1: [1, 2, 3]})</tt>
<p><tt>>>> f.swap()</tt>
<br><tt>Traceback (innermost last):</tt>
<br><tt>File "&lt;stdin>", line 1, in ?</tt>
<br><tt>File "ndict/py", line 150, in swap</tt>
<br><tt>File "ndict/py", line 22, in __init__</tt>
<br><tt>TypeError: unhashable type</tt>
<p><b>operator + :</b>
<br><tt>>>> s.keys()</tt>
<br><tt>['Abend', 'aber', 'Auto', 'deshalb']</tt>
<br><tt>>>> t.keys()</tt>
<br><tt>['gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung', 'Fl\366te']</tt><tt></tt>
<p><tt>>>> (s+t).keys()</tt>
<br><tt>['Auto', 'gewinnen', 'deshalb', 'Abend', 'aber', 'Bild', 'Erkennung',
'Fl\366te']</tt>
<p><tt>>>> (t+s).keys()</tt>
<br><tt>['gewinnen', 'Bild', 'Erkennung', 'Fl\366te', 'Abend', 'aber',
'Auto', 'deshalb']</tt>
<p><b>operator %:</b>
<br><tt>>>> print """'Bild' is the German word for '%(Bild)s' and</tt>
<br><tt>... 'Fl&ouml;te' is '%(Fl&ouml;te)s' in English"""%t</tt>
<br><tt>'Bild' is the German word for 'picture' and</tt>
<br><tt>'Fl&ouml;te' is 'flute' in English</tt>
<h2>
Initialising the dictionary:</h2>
An empty seqdict:
<br><tt>>>> ndict.seqdict()</tt>
<br><tt>seqdict(</tt>
<br><tt>[],</tt>
<br><tt>{})</tt>
<p>3 ways to initialize the seqdict:
<br><tt>>>> d1=seqdict.seqdict(dict.keys(),dict.values())</tt>
<br><tt>>>> d2=seqdict.seqdict(dict.keys(),dict)</tt>
<br><tt>>>> d3=seqdict.seqdict(dict)</tt>
<br><tt>>>> d1==d2==d3</tt>
<br><tt>1</tt>
<h2>
Things which will not work:</h2>

<table WIDTH="100%" >
<tr>
<td>doesn't work:</td>

<td>use:</td>
</tr>

<tr>
<td><tt>for key in t:</tt></td>

<td><tt>for key in t.keys():</tt></td>
</tr>

<tr>
<td><tt>key in t:</tt></td>

<td><tt>key in t.keys():</tt></td>
</tr>
</table>

</body>
</html>
